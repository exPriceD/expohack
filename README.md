## MVP решения
![](gif/mvp.gif)

## Описание идеи

Наше решение кейса основывается на использовании динамического (самообучаемого) машиного обучения.

В первую очередь собираются данные из CRM-систем партнеров (через API или CSV-экспорт) и проводится их предварительная обработка: очистка, нормализация, выявление паттернов поведения клиентов и кластеризация по интересам и потребностям. Для CSV-экспорта можно сделать автоматизированный экспорт с определённым интервалом и скриптом преобразовывать данные в нужный нам вид.

На основе этих данных обучаются модели машинного обучения, которые предсказывают потребности клиентов и формируют персонализированные рекомендации. Рекомендации актуализируются в реальном времени, обеспечивая высокую релевантность предложений. Система использует гибридный подход, сочетающий Collaborative Filtering (User-Based) и Content-Based Filtering.

Панель администратора предоставляет возможность просматривать ключевые метрики эффективности, управлять базой данных, настраивать пороговые значения для рекомендаций и параметры моделей машинного обучения. В будущем планируется введение дополнительных метрик для оценки качества рекомендаций и проведение А/В тестирований для оптимизации алгоритмов и подходов.

## Архитектура
### DFD
На уровне 0 диаграммы представлена основная архитектура системы, где выделяются ключевые акторы: CRM-партнеры, администраторы и пользователи. CRM-системы предоставляют данные, которые поступают в рекомендательную систему. В ответ пользователи получают персонализированные рекомендации. Администраторы могут взаимодействовать с системой для настройки админских параметров и получения метрик, что позволяет контролировать работу системы и вносить необходимые коррективы.

На уровне 1 диаграммы работа системы детализируется и разбивается на несколько взаимосвязанных компонентов. Все данные, поступающие от различных источников, таких как CRM-системы и API партнеров, сначала проходят через этап предварительной обработки (Data Preprocessing). Этот этап обеспечивает очистку и форматирование данных для дальнейшего анализа. Обработанные данные затем передаются в модуль анализа (Data Analysis), который извлекает полезную информацию и закономерности.

Результаты анализа передаются в модуль машинного обучения (Machine Learning), где создаются и обучаются модели на основе ранее полученных данных. Эти модели затем используются в модуле персонализации (Personalization) для генерации рекомендаций, которые хранятся в базе данных рекомендаций (Recommendation Store). Пользователи получают доступ к этим рекомендациям, что способствует улучшению их опыта взаимодействия с системой.

Кроме того, администраторы системы могут управлять настройками через панель администратора (Admin Dashboard), где также доступны метрики и обратная связь от пользователей. Это позволяет администраторам контролировать эффективность рекомендательной системы и вносить изменения по мере необходимости.

## Архитектура базы данных
Архитектура базы данных основана на предоставленой модели данных клиента.
Данные о клиенте разделены на несколько таблиц для нормализации базы данных.

**Основные таблицы:**
- `users` - информация о пользователях (администраторах).
- `clients` - основная информация о клиентах.
- `products` - информация о продуктах и услугах партнёров.
- `partners` - информация о партнёрах.
- `recommendations` - рекомендаций и процент их успешности, построенные на основе модели ML.

**Дополнительные таблицы:**
- `client_passports` - информация о паспортных данных клиента.
- `client_driver_licenses` - информация о водительском удостоверении клиента.
- `cars` - информация о машине(-ах) клиента.
- `client_zagran_passports` - информация о данных загранпаспорта клиента.
- `credits` - информация о кредите(-ах) клиента.
- `recommendation_feedback` - хранение отзывов клиентов о полученных рекомендациях.

## Функциональные и нефункциональные требования

### Функциональные требования

**1. Управление клиентскими данными:**
- Возможность добавления, редактирования и удаления информации о клиентах.
- Импорт данных клиентов из CSV файлов.
- Автоматическая очистка и нормализация данных при импорте.

**2. Обучение модели машинного обучения:**
- Автоматическое обучение модели на основе текущих данных о клиентах и их покупках.
- Обновление модели по расписанию или вручную.
- Поддержка нескольких алгоритмов (например, Logistic Regression, Random Forest, Neural Networks).

**3. API для взаимодействия с моделью:**
- REST API для получения рекомендаций на основе данных клиента.
- REST API для получения списка услуг партнёров.
- Аутентификация и авторизация для доступа к API.

**4. Административный веб-интерфейс:**
- Просмотр информации о клиентах и их покупках.
- Просмотр рекомендаций, предоставляемых моделью ИИ.
- Настройка параметров модели (например, пороговые значения для рекомендаций).
- Проведение A/B тестов для оценки эффективности различных подходов к рекомендациям.
- Логи и отчеты о работе системы и качестве рекомендаций.

**5. Интеграция с CRM системами партнеров:**
- Возможность импорта данных из CRM систем партнеров в формат CSV.
- Обработка и очистка данных при импорте из внешних систем.
- Обработка перечня услуг в формата .txt.

### Нефункциональные требования

**1. Производительность:**
- Система должна обрабатывать запросы и предоставлять рекомендации в течение нескольких секунд.

**2. Масштабируемость:**
- Возможность горизонтального масштабирования компонентов системы для обработки увеличивающихся объемов данных и пользователей.
- Легкость добавления новых алгоритмов и моделей машинного обучения.

**3. Надежность и доступность:**
- Обеспечение высокой доступности системы (99.9% uptime).
- Автоматическое резервное копирование данных и модели.
- Восстановление данных и системы в случае сбоев.

**4. Безопасность:**
- Шифрование данных клиентов при хранении и передаче.
- Аутентификация и авторизация для доступа к административному интерфейсу и API.
- Соответствие требованиям GDPR и других регламентов по защите данных.

**5. Удобство использования:**
- Интуитивно понятный интерфейс для администраторов.
- Документация и обучение для новых пользователей системы.
- Поддержка многоязычности для удобства работы администраторов из разных регионов.

**6. Поддержка и обслуживание:**
- Логи и мониторинг работы системы для быстрого обнаружения и устранения проблем.
- Регулярные обновления и патчи для обеспечения безопасности и производительности.
- Техническая поддержка для пользователей системы.

## Требования для партнёров
Предоставление данных клиентов в стандартизированном формате:
- API либо выгрузка из CRM системы данных в формате CVS.
- Список всех предоставляемых услуг в формате .txt по шаблону:
```
<Название организации>
<Услуга 1> - <описание (если имеется)>
<Услуга 2>
...
```

## Используемый стек технологий
### Fullstack
- React.js
- PostgreSQL

### Машинное обучение
- Python (PyTorch, LightFM, Pandas, Numpy, Scikit)

## Защита персональных данных

**1. Валидация данных**

Валидация данных происходит на этапе занесения/изменения полей в базе данных. Проверяется, данные не нарушают целостность базы данных (например, обязательные поля не пусты, корректные типы данных, уникальные ключи), соответствуют ожидаемому формату (например, адреса электронной почты, номера телефонов), значения полей находятся в допустимых диапазонах или принадлежат определённым наборам значений. Она организована на основе SQL-констрейнтов.
Для полей, которые могут быть пустыми, установливабтся значения по умолчанию.

**2. Шифрование данных при хранении и передаче**

Используются алгоритмы симметричного (AES) и асимметричного (RSA) шифрования для защиты конфиденциальных данных в базе данных. Применятся протокол TSL при передаче данных по сети

**3. Маскировка и анонимизация данных**

Применяется для скрытия части данных личных документов клиента, данных банковской карты. Скрываются данные внутренних контактов компаний-партнёров.

## Каналы рекламы

Наша команда предположила возможные каналы рекламы, которые можно использовать совместно с рекомендациями услуг. В будущем эту схему можно дополнить, сделать CSV файл из всех возможных каналов и при помощи ML-модели NCF (либо любой другой с нейронными сетями) предполагать как лучше конкретному пользователю продать услугу. ML-модель также может быть обучена на поиск лучших маркетинговых стратегий для конкретной услуги.

В рамках стратегии продвижения необходимо учитывать особенности каждого канала и их комбинированное использование. Например, для массового охвата может подойти наружная и интернет-реклама, тогда как для точечного воздействия более эффективными будут прямая реклама и сувенирная продукция. Печатная реклама может дополнить кампанию, добавляя доверия и создавая дополнительные точки взаимодействия с клиентами.

